<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    /**
     * 任意可遍历的对象都可以解构，例如对象，数字，字符串，Set等等
     * */


    /**
     * 数组解构
     * */

    //方式1
    // let arr = [1, 2, 3]
    // let [a, b, c] = [1, 2, 3]
    // console.log(a, b, c)   //1 2 3


    //方式2
    // let [a, b, [c, d]] = [1, 2, [3, 4]]
    // console.log(a, b, c, d)   //1 2 3 4


    //方式3
    // let [a, b, [c]] = [1, 2, [3, 4]]
    // console.log(a, b, c)   //1 2 3

    //方式4
    // let [a, b, c] = [1, 2, [3, 4]]
    // console.log(a, b, c)  //1 2 [3, 4]


    //方式5
    // let [a, b, c, d = 5] = [1, 2, [3, 4], 6]
    // console.log(a, b, c, d)//1 2 [3, 4] 6


    /**
     * 对象的解构
     */
    //方式1
    // let user = {
    //     name: 'xiecheng',
    //     age: 34
    // }
    // let {age: uage, name: uname} = user
    // console.log(uname, uage)   //xiecheng 34


    //方式2，默认值
    // let {name, age = 18} = {
    //     name: 'xiecheng',
    //     // age: 34
    // }
    // console.log(name, age)


    //方式3，解构的同时更换变量名
    let {name:nn, age:aa = 18} = {
            name: 'xiecheng',
            // age: 34
        }
    // console.log(name, age)//name和age都未定义
    console.log(nn, aa)

    //方式4 rest
    /*
    let options = {
        title: "Menu",
        height: 200,
        width: 100
    }
    let {title, ...rest} = options
    // now title="Menu", rest={height: 200, width: 100}
    console.log(rest.height)  // 200
    console.log(rest.width)   // 100
    */

    //方式5，嵌套对象或数组，对数组同样适用
    //如果一个 Array 或者 Object 比较复杂，它嵌套了 Array 或者 Object，那只要被赋值的结构和右侧赋值的元素一致就好了。
    /*
    let options = {
        size: {
            width: 100,
            height: 200
        },
        items: ["Cake", "Donut"],
        extra: true    // something extra that we will not destruct
    }

    // destructuring assignment on multiple lines for clarity
    let {
        size: { // put size here
            width,
            height
        },
        items: [item1, item2], // assign items here
        title = 'Menu' // not present in the object (default value is used)
    } = options

    console.log(title)  // Menu
    console.log(width)  // 100
    console.log(height) // 200
    console.log(item1)  // Cake
    console.log(item2)  // Donut
    */



    /**
     * 字符串的解构
     * */
    let str = 'imooc'
    // // for (let i = 0; i < str.length; i++) {
    // //     console.log(str[i])
    // // }
    let [a, b, c, d, e] = str
    console.log(a, b, c, d, e)   //i m o o c


    /**
     * set解构
     * */
    let [one, two, three] = new Set([1, 2, 3])
    console.log(one,two,three)   //1 2 3

    /**
     * 循环体中使用解构
     */
    //1,遍历对象
    let user = {
            name: 'John',
            age: 30
        }
    //    Object.entries(user)可以将对象转换为键值对数组，与Object.entries(user)相对的是Object.fromEntries()，Object.fromEntries() 把键值对列表转换为一个对象，例如：Object.fromEntries([['name', 'John'], ['age', 30]]) = {name: 'John', age: 30}
    //    例如：Object.entries(user) = [['name', 'John'], ['age', 30]]，注意是二维数字，数组的每一个元素都是key和value组成的数组
    console.log('将对象转换为键值对数组:',Object.entries(user),Object.entries(user)[0],Object.entries(user)[1])   
    for (let [key, value] of Object.entries(user)) {
        console.log(`${key}:${value}`) // name:John,  age:30
    }

    //2，遍历map
    let user2 = new Map()
    user2.set('name', 'John')
    user2.set('age', '30')

    for (let [key, value] of user2.entries()) {
        console.log(`user2---${key}:${value}`) // name:John, age:30
    }


    /**
     * 跳过某些元素进行解构
     * 如果想忽略数组的某个元素对变量进行赋值，可以使用逗号来处理
     */
// second element is not needed
        //你看，这里我忽略了第二个元素‘Jim’，且不接受第四个元素'Moon'
    // let [name, , title] = ['John', 'Jim', 'Sun', 'Moon']
    // console.log( title ) // Sun


    /**
     * rest参数
     *
     * name11,name22是单独的元素，接受'Julius'和'Caesar'
     * 其余的都放到rest数组里
     * rest可以换成其他任意单词
     * rest必须放到最后才可以
     */
    let [name11, name22, ...rest] = ["Julius", "Caesar", "Consul", "of the Roman Republic"]
    // let [name11, name22, ...rest,name33] = ["Julius", "Caesar", "Consul", "of the Roman Republic"] 运行时错误，rest必须在最后

    console.log(name11) // Julius
    console.log(name22) // Caesar

    // Note that type of `rest` is Array.
    console.log(rest[0]) // Consul
    console.log(rest[1]) // of the Roman Republic
    console.log(rest.length) // 2


    /**
     * 利用解构声明给方法传参
     *
     * /
    //省略、、、、

    /**
     * json
     */
    let json = '{"aaa": "hello", "bbb": "world"}'
    let {aaa, bbb}= JSON.parse(json)
    console.log(aaa, bbb)   //hello world

</script>
</body>
</html>